<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GIS</title>
    <!-- Boostrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
      integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
      crossorigin=""
    ></script>

    <!-- Boostrap Icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
      integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h3 class="py-2 text-xl font-medium mx-auto container">
      <i class="bi bi-geo-alt"></i>&nbsp;GIS | Leaflet
    </h3>
    <div class="container mx-auto">
      <div
        class="w-full border border-2 border-primary"
        style="border-radius: 1rem"
      >
        <div
          class="m-2 rounded-2xl"
          id="map"
          style="height: 500px; border-radius: 1rem"
        ></div>
      </div>
    </div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <script>
      var lat = -8.519690764779996;
      var lng = 115.12325785399827;
      var map = L.map("map").setView([lat, lng], 12);
      var markerIcon = L.icon({
        iconUrl: "marker.png",
        iconSize: [30, 30], // size of the icon
        popupAnchor: [0, -30], // point from which the popup should open relative to the iconAnchor
      });

      L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; GIS",
      }).addTo(map);

      var marker = L.marker([lat, lng], {
        icon: markerIcon,
      })
        .bindPopup(
          "<div>You clicked the map at</div><div class='mt-2'>Lat: " +
            lat +
            "</div><div>Long: " +
            lng +
            "</div>"
        )
        .openPopup()
        .addTo(map);

      let markers = [];

      function onMapClick(e) {
        L.marker(e.latlng, {
          icon: markerIcon,
        })
          .bindPopup(
            "<div>You clicked the map at</div><div class='mt-2'>Lat: " +
              e.latlng.lat +
              "</div><div>Long: " +
              e.latlng.lng +
              "</div>"
          )
          .addTo(map)
          .openPopup();
        markers.push({ lat: e.latlng.lat, long: e.latlng.lng });
        console.log(markers);
      }

      map.on("click", onMapClick);
    </script>
  </body>
</html>
